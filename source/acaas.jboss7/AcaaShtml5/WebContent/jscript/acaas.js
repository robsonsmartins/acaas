function Acaas(urlAcaas){var tts=new AcaasMediaService(urlAcaas+"/tts");var stt=new AcaasService(urlAcaas+"/stt");var t2libras=new AcaasMediaService(urlAcaas+"/t2libras");var s2libras=new AcaasMediaService(urlAcaas+"/s2libras");this.getTTS=function(data,mediaType,onData,onFinish,onError){tts.get(data,null,mediaType,onData,onFinish,onError);};this.getSTT=function(data,mediaType,onData,onFinish,onError){stt.get(data,mediaType,onData,onFinish,onError);};this.getT2Libras=function(data,mediaType,onData,onFinish,onError){t2libras.get(data,null,mediaType,onData,onFinish,onError);};this.getS2Libras=function(data,iMediaType,oMediaType,onData,onFinish,onError){s2libras.get(data,iMediaType,oMediaType,onData,onFinish,onError);};}function AcaasService(urlService){var acaasFormatParam="format";var acaas=new AcaasConnection();this.get=function(data,mediaType,onData,onFinish,onError){var url=urlService+"?"+acaasFormatParam+"="+mediaType;acaas.queryService(url,data,true,function(json){if(onData){onData(json);}if(onFinish){onFinish();}},onError);};}function AcaasMediaService(urlService){var urlMedia=urlService+"/media";var acaasFormatParam="format";var acaasIformatParam="iformat";var acaasOformatParam="oformat";var mediaCount=-1;var jsonData=null;var acaas=new AcaasConnection();this.get=function(data,iMediaType,oMediaType,onData,onFinish,onError){var url=urlService;var mediaType=null;if(iMediaType!=null&&oMediaType!=null){url+="?"+acaasIformatParam+"="+iMediaType+"&"+acaasOformatParam+"="+oMediaType;mediaType=oMediaType;}else{if(iMediaType!=null){url+="?"+acaasFormatParam+"="+iMediaType;mediaType=iMediaType;}else{if(oMediaType!=null){url+="?"+acaasFormatParam+"="+oMediaType;mediaType=oMediaType;}}}acaas.queryService(url,data,true,function(json){jsonData=json;mediaCount=-1;getMediaData(mediaType,onData,onFinish,onError);},onError);};function getMediaData(mediaType,onData,onFinish,onError){if(jsonData!=null&&jsonData.items!=null&&mediaCount<jsonData.items.length-1){mediaCount++;var url=urlMedia+"/"+jsonData.items[mediaCount].media;var info=jsonData.items[mediaCount];acaas.getMedia(url,info,mediaType,true,function(mediaData,mediaInfo){processMedia(mediaData,mediaInfo,mediaType,onData,onFinish,onError);},onError);}else{if(onFinish){onFinish();}}}function processMedia(data,info,mediaType,onData,onFinish,onError){if(onData){onData(data,info);}getMediaData(mediaType,onData,onFinish,onError);}}function AcaasConnection(){this.queryService=function(url,data,async,onData,onError){if(async==null){async=false;}var xhttp=new XMLHttpRequest();xhttp.open("POST",url,async);xhttp.onload=function(event){var jsonStr=this.response;var json=null;if(jsonStr!=null){json=JSON.parse(jsonStr);}if(onData){onData(json);}};xhttp.onerror=function(event){var reqStatus=this.status;var reqStatusText=this.statusText;if(onError){onError(reqStatus,reqStatusText);}};xhttp.send(data);};this.getMedia=function(url,info,mediaType,async,onData,onError){if(async==null){async=false;}var xhttp=new XMLHttpRequest();if("withCredentials" in xhttp){xhttp.open("GET",url,async);}else{if(typeof XDomainRequest!="undefined"){xhttp=new XDomainRequest();xhttp.open("GET",url);}}xhttp.onload=function(event){var blob=null;try{blob=new Blob([this.response],{type:mediaType});}catch(e){var blobBuilder=null;if(typeof BlobBuilder!="undefined"){blobBuilder=new BlobBuilder();}else{if(typeof WebKitBlobBuilder!="undefined"){blobBuilder=new WebKitBlobBuilder();}else{if(typeof MozBlobBuilder!="undefined"){blobBuilder=new MozBlobBuilder();}else{if(typeof MSBlobBuilder!="undefined"){blobBuilder=new MSBlobBuilder();}}}}blobBuilder.append(this.response);blob=blobBuilder.getBlob(mediaType);}if(onData){onData(blob,info);}};xhttp.onerror=function(event){var reqStatus=this.status;var reqStatusText=this.statusText;if(onError){onError(reqStatus,reqStatusText);}};try{xhttp.responseType="arraybuffer";xhttp.send();}catch(e){xhttp.responseType="";xhttp.send();}};}if(typeof JSON!=="object"){JSON={};}(function(){function f(n){return n<10?"0"+n:n;}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null;};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf();};}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap=0,indent=0,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep=0;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4);})+'"':'"'+string+'"';}function str(key,holder){var i=0,k=0,v=0,length,mind=gap,partial,value=holder[key];if(value&&typeof value==="object"&&typeof value.toJSON==="function"){value=value.toJSON(key);}if(typeof rep==="function"){value=rep.call(holder,key,value);}switch(typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null";}gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||"null";}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";gap=mind;return v;}if(rep&&typeof rep==="object"){length=rep.length;for(i=0;i<length;i+=1){if(typeof rep[i]==="string"){k=rep[i];v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v);}}}}else{for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v);}}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";gap=mind;return v;}}if(typeof JSON.stringify!=="function"){JSON.stringify=function(value,replacer,space){var i;gap="";indent="";if(typeof space==="number"){for(i=0;i<space;i+=1){indent+=" ";}}else{if(typeof space==="string"){indent=space;}}rep=replacer;if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number")){throw new Error("JSON.stringify");}return str("",{"":value});};}if(typeof JSON.parse!=="function"){JSON.parse=function(text,reviver){var j;function walk(holder,key){var k=0,v=0,value=holder[key];if(value&&typeof value==="object"){for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v;}else{delete value[k];}}}}return reviver.call(holder,key,value);}text=String(text);cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4);});}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j;}throw new SyntaxError("JSON.parse");};}}());function Queue(){var queue=[];var offset=0;this.getLength=function(){return(queue.length-offset);};this.isEmpty=function(){return(queue.length==0);};this.enqueue=function(item){queue.push(item);};this.dequeue=function(){if(queue.length==0){return undefined;}var item=queue[offset];if(++offset*2>=queue.length){queue=queue.slice(offset);offset=0;}return item;};this.peek=function(){return(queue.length>0?queue[offset]:undefined);};}