<!DOCTYPE html>
<html>
<head>
	<title>Test</title>
	<script src="json2.js"></script> 
</head>
<body>

<audio id="player" controls preload="none">
  <source src="" type="audio/wav">
	Your browser does not support the audio element.
</audio>

<!-- 
<video id="player" width="320" height="240" autoplay preload="auto">
  <source src="teste.mp4" type="video/mp4">
  <source src="teste.ogg" type="video/ogg">
Your browser does not support the video tag.
</video> 
 -->
 

</body>

<script>
var player = document.getElementById("player");
var xhttp = new XMLHttpRequest();
var count = 0;
var json = null;
	
player.addEventListener("ended",getNextAudio);

window.onload = function() {
	getItems();
    getNextAudio();
};

function getNextAudio() {
	if (json != null && json.items != null && count < json.items.length) {
		player.src = "service/tts/audio/" + json.items[count].audio;
		player.type= "audio/wav";
		player.play();
    	count++;
	}
}

function getItems() {
	xhttp.open('GET', "service/tts?text=com muito amor", false);
	xhttp.send();
	jsonStr = xhttp.response;
    if (jsonStr != null) { json = JSON.parse(jsonStr); }
}
</script>


</html>

